!function(e){function t(t){for(var s,o,r=t[0],c=t[1],l=t[2],d=0,f=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);for(u&&u(t);f.length;)f.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],s=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(s=!1)}s&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var s={},i={0:0},a=[];function o(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise(function(t,s){n=i[e]=[t,s]});t.push(n[2]=s);var a,r=document.createElement("script");r.charset="utf-8",r.timeout=120,o.nc&&r.setAttribute("nonce",o.nc),r.src=function(e){return o.p+""+({}[e]||e)+".js"}(e);var c=new Error;a=function(t){r.onerror=r.onload=null,clearTimeout(l);var n=i[e];if(0!==n){if(n){var s=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+s+": "+a+")",c.name="ChunkLoadError",c.type=s,c.request=a,n[1](c)}i[e]=void 0}};var l=setTimeout(function(){a({type:"timeout",target:r})},12e4);r.onerror=r.onload=a,document.head.appendChild(r)}return Promise.all(t)},o.m=e,o.c=s,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="_bundles/",o.oe=function(e){throw console.error(e),e};var r=window.webpackJsonp=window.webpackJsonp||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;a.push([17,1]),n()}([,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GLOBAL_MODULE=void 0;var s=n(18),i=n(19),a=n(20),o=n(22),r=n(8),c=n(24),l=n(25),u=n(26),d=t.GLOBAL_MODULE=angular.module("global",[]);d.directive("dialog",o.dialog),d.service("AppConfig",s.AppConfig),d.service("AuthService",i.AuthService),d.service("Contacts",a.Contacts),d.service("Folders",a.Folders),d.service("Messages",a.Messages),d.service("DialogService",r.DialogService),d.service("LoadingIndicatorService",c.LoadingIndicatorService),d.run(l.authHookRunBlock),d.run(u.loadingIndicatorHookRunBlock)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.setProp=function(e,t,n){return e[t]=n,e};var s=t.pushToArr=function(e,t){return e.push(t),e},i=(t.uniqReduce=function(e,t){return-1!==e.indexOf(t)?e:s(e,t)},t.flattenReduce=function(e,t){return e.concat(t)},function(e){return"x"!==e&&"y"!==e?"-":Math.floor(16*Math.random()).toString(16).toUpperCase()});t.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split("").map(i).join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogService=void 0;var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(5));(t.DialogService=function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var a=t.find("body"),o=s.element("<div class='dialog' dialog='opts'></div>");this.confirm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Are you sure?",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Yes",c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"No";return n(o)(s.extend(i.$new(),{message:e,details:t,yesMsg:r,noMsg:c})),a.append(o),o.data("promise").finally(function(){return o.removeClass("active").remove()})}}).$inject=["$document","$compile","$rootScope"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAIN_MODULE=void 0;var s=n(10),i=n(11),a=n(12),o=n(13),r=n(27),c=t.MAIN_MODULE=angular.module("main",[]);c.config(["$uiRouterProvider",function(e){e.trace.enable(1),e.urlService.rules.otherwise({state:"welcome"});var t=e.stateRegistry;t.register(r.appState),t.register(r.homeState),t.register(r.loginState),t.register(r.welcomeState),t.register(r.contactsFutureState),t.register(r.prefsFutureState),t.register(r.mymessagesFutureState)}]),c.component("app",s.app),c.component("welcome",i.welcome),c.component("login",a.login),c.component("home",o.home)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,s,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.AuthService=n,this.$state=s,this.emailAddress=t.emailAddress,this.isAuthenticated=n.isAuthenticated()}return e.prototype.logout=function(){var e=this.AuthService,t=this.$state;return e.logout(),t.go("welcome",{},{reload:!0})},e.prototype.isActive=function(e){return this.$state.includes(e)},e}();s.$inject=["AppConfig","AuthService","$state","$transitions","LoadingIndicatorService"];t.app={controller:s,template:'\n    <div class="navheader">\n      <ul ng-if="::$ctrl.isAuthenticated" class="nav nav-tabs">\n    \n        <li ui-sref-active="active"> <a ui-sref="mymessages" role="button"> Messages </a> </li>\n        <li ui-sref-active="active"> <a ui-sref="contacts" role="button"> Contacts </a> </li>\n        <li ui-sref-active="active"> <a ui-sref="prefs" role="button"> Preferences </a> </li>\n    \n        <li class="navbar-right">\n          <button class="btn btn-primary fa fa-home" ui-sref="home"></button>\n          <button style="margin-right: 15px;" class="btn btn-primary" ui-sref="mymessages.compose"><i class="fa fa-envelope"></i> New Message</button>\n        </li>\n    \n        <li class="navbar-text navbar-right logged-in-user" style="margin: 0.5em 1.5em;">\n          <div>\n            {{::$ctrl.emailAddress}} <i class="fa fa-chevron-down"></i>\n            <div class="hoverdrop">\n              <button class="btn btn-primary" ng-click="$ctrl.logout()">Log Out</button>\n            </div>\n          </div>\n        </li>\n    \n      </ul>\n    </div>\n    \n    <div ui-view></div>\n    <div ui-view="mymessages" ng-show="$ctrl.isActive(\'mymessages.**\')"></div>\n    <div ui-view="contacts" ng-show="$ctrl.isActive(\'contacts.**\')"></div>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.welcome={template:'\n    <div class="container-fluid">\n    \n      <h3>UI-Router Sample App</h3>\n    \n      <p>Welcome to the sample app!</p>\n      <p>This is a demonstration app intended to highlight some patterns that can be used within UI-Router.\n        These patterns should help you to to build cohesive, robust apps.  Additionally, this app uses state-vis\n        to show the tree of states, and a transition log visualizer.</p>\n    \n      <h4>App Overview</h4>\n      <p>\n        First, start exploring the application\'s functionality at a high level by activating\n        one of the three submodules: Messages, Contacts, or Preferences. If you are not already logged in,\n        you will be taken to an authentication screen (the authentication is fake; the password is "password")\n        <div>\n          <button class="btn btn-primary" ui-sref="mymessages"><i class="fa fa-envelope"></i><span>Messages</span></button>\n          <button class="btn btn-primary" ui-sref="contacts"><i class="fa fa-users"></i><span>Contacts</span></button>\n          <button class="btn btn-primary" ui-sref="prefs"><i class="fa fa-cogs"></i><span>Preferences</span></button>\n        </div>\n      </p>\n    \n      <h4>Patterns and Recipes</h4>\n      <ul>\n        <li>Require Authentication</li>\n        <li>Previous State</li>\n        <li>Redirect Hook</li>\n        <li>Default Param Values</li>\n      </ul>\n    </div>'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e};var i=function e(t,n,i){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.usernames=n.usernames,this.credentials={username:t.emailAddress,password:"password"},this.login=function(e){a.authenticating=!0;n.authenticate(e.username,e.password).then(function(){var e=a.returnTo.state(),t=a.returnTo.params(),n=s({},a.returnTo.options(),{reload:!0});i.go(e,t,n)}).catch(function(e){return a.errorMessage=e}).finally(function(){return a.authenticating=!1})}};i.$inject=["AppConfig","AuthService","$state"];t.login={bindings:{returnTo:"<"},controller:i,template:'\n    <div class="container">\n      <div class="col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2">\n        <h3>Log In</h3>\n        <p>(This login screen is for demonstration only... just pick a username, enter \'password\' and click <b>"Log in"</b>)</p>\n        <hr>\n    \n        <div>\n          <label for="username">Username:</label>\n          <select class="form-control" name="username" id="username"\n            ng-model="$ctrl.credentials.username" ng-options="username for username in $ctrl.usernames"></select>\n          <i style="position: relative; bottom: 1.8em; margin-left: 10em; height: 0"\n              ng-hide="$ctrl.credentials.username" class="fa fa-arrow-left bounce-horizontal"> Choose </i>\n        </div>\n        <br>\n    \n        <div>\n          <label for="password">Password:</label>\n          <input class="form-control" type="password" name="password" ng-model="$ctrl.credentials.password">\n          <i style="position: relative; bottom: 1.8em; margin-left: 5em; height: 0"\n              ng-hide="!$ctrl.credentials.username || $ctrl.credentials.password == \'password\'" class="fa fa-arrow-left bounce-horizontal">\n            Enter \'<b>password</b>\' here\n          </i>\n        </div>\n    \n        <div ng-show="$ctrl.errorMessage" class="well error">{{ $ctrl.errorMessage }}</div>\n    \n        <hr>\n        <div>\n          <button class="btn btn-primary" type="button"\n              ng-disabled="$ctrl.authenticating" ng-click="$ctrl.login($ctrl.credentials)">\n            <i class="fa fa-spin fa-spinner" ng-show="$ctrl.authenticating"></i> <span>Log in</span>\n          </button>\n          <i ng-show="$ctrl.credentials.username && $ctrl.credentials.password == \'password\'" style="position: relative;" class="fa fa-arrow-left bounce-horizontal"> Click Me!</i>\n      </div>\n    </div>\n    '}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.home={template:'\n    <div class="home buttons">\n      <button ui-sref="mymessages" class="btn btn-primary">\n        <h1><i class="fa fa-envelope"></i></h1>\n        <h1>Messages</h1>\n      </button>\n\n      <button ui-sref="contacts" class="btn btn-primary">\n      <h1><i class="fa fa-users"></i></h1>\n      <h1>Contacts</h1>\n      </button>\n\n      <button ui-sref="prefs" class="btn btn-primary">\n        <h1><i class="fa fa-cogs"></i></h1>\n        <h1>Preferences</h1>\n      </button>\n    </div>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONTACTS_MODULE=void 0;var s=n(28),i=n(29),a=n(30),o=n(31),r=n(32),c=n(33),l=t.CONTACTS_MODULE=angular.module("contacts",[]);l.component("contactView",o.contactView),l.component("contacts",a.contacts),l.component("editContact",r.editContact),l.component("contactDetail",s.contactDetail),l.component("contactList",i.contactList),l.config(["$stateRegistryProvider",function(e){e.register(c.contactsState),e.register(c.newContactState),e.register(c.viewContactState),e.register(c.editContactState)}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MYMESSAGES_MODULE=void 0;var s=n(34),i=n(35),a=n(36),o=n(37),r=n(38),c=n(39),l=n(40),u=n(41),d=n(42),f=n(43),p=t.MYMESSAGES_MODULE=angular.module("mymessages",[]);p.directive("sortMessages",l.sortMessages),p.component("compose",s.compose),p.component("folderList",i.folderList),p.component("message",a.message),p.component("messageList",o.messageList),p.component("mymessages",r.mymessages),p.component("messageTable",c.messageTable),p.filter("messageBody",u.messageBody),p.service("MessageListUI",d.MessageListUI),p.config(["$stateRegistryProvider",function(e){e.register(f.composeState),e.register(f.messageState),e.register(f.messageListState),e.register(f.mymessagesState)}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PREFS_MODULE=void 0;var s=n(44),i=n(45),a=t.PREFS_MODULE=angular.module("prefs",[]);a.component("prefs",s.prefs),a.config(["$stateRegistryProvider",function(e){e.register(i.prefsState)}])},function(e,t,n){"use strict";n(6),n(9),n(14),n(15),n(16),n(46)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AppConfig=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sort="+date",this.emailAddress=void 0,this.restDelay=100,this.load()}return e.prototype.load=function(){try{return angular.extend(this,angular.fromJson(sessionStorage.getItem("appConfig")))}catch(e){}return this},e.prototype.save=function(){sessionStorage.setItem("appConfig",angular.toJson(angular.extend({},this)))},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t.AuthService=function(){function e(t,n,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.AppConfig=t,this.$q=n,this.$timeout=s,this.usernames=["myself@angular.dev","devgal@angular.dev","devguy@angular.dev"]}return e.prototype.isAuthenticated=function(){return!!this.AppConfig.emailAddress},e.prototype.authenticate=function(e,t){var n=this,s=this.$timeout,i=this.$q,a=this.AppConfig;return s(function(){return i(function(s,i){return-1!==n.usernames.indexOf(e)&&"password"===t?s(e):i("Invalid username or password")})},800).then(function(e){a.emailAddress=e,a.save()})},e.prototype.logout=function(){this.AppConfig.emailAddress=void 0,this.AppConfig.save()},e}()).$inject=["AppConfig","$q","$timeout"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messages=t.Folders=t.Contacts=void 0;var s=n(21);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),s=0;s<n.length;s++){var i=n[s],a=Object.getOwnPropertyDescriptor(t,i);a&&a.configurable&&void 0===e[i]&&Object.defineProperty(e,i,a)}}(e,t))}(t.Contacts=function(e){function t(n,s,o,r){return i(this,t),a(this,e.call(this,n,s,o,"contacts","data/contacts.json",r))}return o(t,e),t}(s.SessionStorage)).$inject=["$http","$timeout","$q","AppConfig"],(t.Folders=function(e){function t(n,s,o,r){return i(this,t),a(this,e.call(this,n,s,o,"folders","data/folders.json",r))}return o(t,e),t}(s.SessionStorage)).$inject=["$http","$timeout","$q","AppConfig"],(t.Messages=function(e){function t(n,s,o,r){return i(this,t),a(this,e.call(this,n,s,o,"messages","data/messages.json",r))}return o(t,e),t.prototype.byFolder=function(e){var t={folder:e._id};return t[-1!==["drafts","sent"].indexOf(e._id)?"from":"to"]=this.AppConfig.emailAddress,this.search(t)},t}(s.SessionStorage)).$inject=["$http","$timeout","$q","AppConfig"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionStorage=void 0;var s=n(7);(t.SessionStorage=function(){function e(t,n,i,a,o,r){var c=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var l=void 0,u=sessionStorage.getItem(a);if(this._data=void 0,this._idProp="_id",this._eqFn=function(e,t){return e[c._idProp]===t[c._idProp]},this.$q=i,this.$timeout=n,this.sessionStorageKey=a,this.AppConfig=r,u)try{l=JSON.parse(u)}catch(e){console.log("Unable to parse session messages, retrieving intial data.")}var d=function(e){return(0,s.setProp)(e,"$$hashKey",void 0)};this._data=(l?i.resolve(l):t.get(o).then(function(e){return e.data})).then(this._commit.bind(this)).then(function(){return JSON.parse(sessionStorage.getItem(a))}).then(function(e){return e.map(d)})}return e.prototype._commit=function(e){return sessionStorage.setItem(this.sessionStorageKey,JSON.stringify(e)),this.$q.resolve(e)},e.prototype.all=function(e){var t=this;return this.$timeout(function(){return t._data},this.AppConfig.restDelay).then(e)},e.prototype.search=function(e){return this.all(function(t){return t.filter(function(e,t){return Object.keys(e).reduce(function(n,s){return n&&function(e,t){return-1!==(""+t).indexOf(""+e)}(e[s],t[s])},!0)}.bind(null,e))})},e.prototype.get=function(e){var t=this;return this.all(function(n){return n.find(function(n){return n[t._idProp]===e})})},e.prototype.save=function(e){return e[this._idProp]?this.put(e):this.post(e)},e.prototype.post=function(e){return e[this._idProp]=(0,s.guid)(),this.all(function(t){return(0,s.pushToArr)(t,e)}).then(this._commit.bind(this))},e.prototype.put=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._eqFn;return this.all(function(s){var i=s.findIndex(n.bind(null,e));if(-1===i)throw Error(e+" not found in "+t);return s[i]=e,t._commit(s).then(function(){return e})})},e.prototype.remove=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._eqFn;return this.all(function(s){var i=s.findIndex(n.bind(null,e));if(-1===i)throw Error(e+" not found in "+t);return s.splice(i,1),t._commit(s).then(function(){return e})})},e}()).$inject=["$http","$timeout","$q","sessionStorageKey","sourceUrl","AppConfig"]},function(e,t,n){"use strict";function s(e,t){return{link:function(n,s){e(function(){return s.addClass("active")}),s.data("promise",t(function(e,t){n.yes=function(){return e(!0)},n.no=function(){return t(!1)}}))},template:'\n      <div class="backdrop"></div>\n      <div class=\'wrapper\'>\n        <div class="content">\n          <h4 ng-show="message">{{message}}</h4>\n          <div ng-show="details">{{details}}</div>\n    \n          <div style="padding-top: 1em;">\n            <button class="btn btn-primary" ng-click="yes()">{{yesMsg}}</button>\n            <button class="btn btn-primary" ng-click="no()">{{noMsg}}</button>\n          </div>\n        </div>\n      </div>\n'}}Object.defineProperty(t,"__esModule",{value:!0}),t.dialog=s,s.$inject=["$timeout","$q"]},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingIndicatorService=void 0;var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(5));(t.LoadingIndicatorService=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.find("body");this.showLoadingIndicator=function(){n.append(s.element('<div id="spinner"><i class="fa fa-spinner fa-pulse fa-3x fa-fw" aria-hidden="true"></i></div>'))},this.hideLoadingIndicator=function(){var e=document.getElementById("spinner");e.parentElement.removeChild(e)}}).$inject=["$document","$compile","$rootScope"]},function(e,t,n){"use strict";function s(e,t){e.onBefore({to:function(e){return e.data&&e.data.requiresAuth}},function(e){var t=e.injector().get("AuthService"),n=e.router.stateService;if(!t.isAuthenticated())return n.target("login",void 0,{location:!1})},{priority:10})}Object.defineProperty(t,"__esModule",{value:!0}),t.authHookRunBlock=s,s.$inject=["$transitions","AuthService"]},function(e,t,n){"use strict";function s(e,t){e.onStart({},t.showLoadingIndicator),e.onFinish({},t.hideLoadingIndicator)}Object.defineProperty(t,"__esModule",{value:!0}),t.loadingIndicatorHookRunBlock=s,s.$inject=["$transitions","LoadingIndicatorService"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mymessagesFutureState=t.prefsFutureState=t.contactsFutureState=t.loginState=t.homeState=t.welcomeState=t.appState=void 0;n(10),n(11),n(13),n(12),t.appState={name:"app",redirectTo:"welcome",component:"app"},t.welcomeState={parent:"app",name:"welcome",url:"/welcome",component:"welcome"},t.homeState={parent:"app",name:"home",url:"/home",component:"home"},t.loginState={parent:"app",name:"login",url:"/login",component:"login",resolve:{returnTo:s}};function s(e){if(null!=e.redirectedFrom())return e.redirectedFrom().targetState();var t=e.router.stateService;return""!==e.from().name?t.target(e.from(),e.params("from")):t.target("home")}s.$inject=["$transition$"];t.contactsFutureState={parent:"app",name:"contacts.**",url:"/contacts",lazyLoad:function(e){var t=e.injector().get("$ocLazyLoad");return Promise.resolve().then(n.t.bind(null,14,7)).then(function(e){return t.load(e.CONTACTS_MODULE)})}},t.prefsFutureState={parent:"app",name:"prefs.**",url:"/prefs",lazyLoad:function(e){var t=e.injector().get("$ocLazyLoad");return Promise.resolve().then(n.t.bind(null,16,7)).then(function(e){return t.load(e.PREFS_MODULE)})}},t.mymessagesFutureState={parent:"app",name:"mymessages.**",url:"/mymessages",lazyLoad:function(e){var t=e.injector().get("$ocLazyLoad");return Promise.resolve().then(n.t.bind(null,15,7)).then(function(e){return t.load(e.MYMESSAGES_MODULE)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.contactDetail={bindings:{contact:"<"},template:'\n    <div class="flex-h">\n      <div class="details">\n        <h3>{{$ctrl.contact.name.first}} {{$ctrl.contact.name.last}}</h3>\n        <div><label>Company</label><div>{{$ctrl.contact.company}}</div></div>\n        <div><label>Age</label><div>{{$ctrl.contact.age}}</div></div>\n        <div><label>Phone</label><div>{{$ctrl.contact.phone}}</div></div>\n        <div><label>Email</label><div>{{$ctrl.contact.email}}</div></div>\n        <div class="flex-h">\n          <label>Address</label>\n          <div>{{$ctrl.contact.address.street}}<br>\n                {{$ctrl.contact.address.city}}, {{$ctrl.contact.address.state}} {{$ctrl.contact.address.zip}}\n          </div>\n        </div>\n      </div>\n  \n      <div class="flex nogrow">\n        <img ng-src="{{$ctrl.contact.picture}}"/>\n      </div>\n    </div>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.contactList={bindings:{contacts:"<"},template:'\n    <ul class="selectlist list-unstyled flex nogrow">\n      <li>\n        \x3c!-- This link is a relative ui-sref to the contacts.new state. --\x3e\n        <a ui-sref=".new">\n          <button class="btn btn-primary">\n            <i class="fa fa-pencil"></i><span>New Contact</span>\n          </button>\n        </a>\n      </li>\n  \n      <li>&nbsp;</li>\n  \n      \x3c!-- Highlight the selected contact:\n          When the current state matches the ui-sref\'s state (and its parameters)\n          ui-sref-active applies the \'selected\' class to the a element --\x3e\n      <li ng-repeat="contact in $ctrl.contacts">\n        <a ui-sref=".contact({contactId: contact._id})" ui-sref-active="selected">\n          {{contact.name.first}} {{contact.name.last}}\n        </a>\n      </li>\n    </ul>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.contacts={bindings:{contacts:"<"},template:'\n    <div class="my-contacts flex-h">\n    \n      <contact-list contacts="$ctrl.contacts" class="flex nogrow"></contact-list>\n    \n      <div ui-view>\n        \x3c!-- This default content is displayed when the ui-view is not filled in by a child state --\x3e\n        <h4 style="margin: 1em 2em;">Select a contact</h4>\n      </div>\n      \n    </div>'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.contactView={bindings:{contact:"<"},template:'\n    <div class="contact">\n    \n      <contact-detail contact="$ctrl.contact"></contact-detail>\n      \n      \x3c!-- This button has an ui-sref to the mymessages.compose state. The ui-sref provides the mymessages.compose\n           state with an non-url parameter, which is used as the initial message model --\x3e\n      <button class="btn btn-primary" ui-sref="mymessages.compose({ message: { to: $ctrl.contact.email } })">\n        <i class="fa fa-envelope"></i><span>Message</span>\n      </button>\n    \n      \x3c!-- This button has a relative ui-sref to the contacts.contact.edit state. --\x3e\n      <button class="btn btn-primary" ui-sref=".edit">\n        <i class="fa fa-pencil"></i><span>Edit Contact</span>\n      </button>\n      \n    </div>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$state=t,this.DialogService=n,this.Contacts=s}return e.prototype.$onInit=function(){this.contact=angular.copy(this.pristineContact)},e.prototype.uiCanExit=function(){if(this.canExit||angular.equals(this.contact,this.pristineContact))return!0;return this.DialogService.confirm("You have unsaved changes to this contact.","Navigate away and lose changes?")},e.prototype.remove=function(e){var t=this;this.DialogService.confirm("Delete contact: "+e.name.first+" "+e.name.last).then(function(){return t.Contacts.remove(e)}).then(function(){return t.canExit=!0}).then(function(){return t.$state.go("^.^",null,{reload:!0})})},e.prototype.save=function(e){var t=this;this.Contacts.save(e).then(function(){return t.canExit=!0}).then(function(){return t.$state.go("^",null,{reload:!0})})},e}();s.$inject=["$state","DialogService","Contacts"];t.editContact={bindings:{pristineContact:"<"},controller:s,template:'\n    <div class="contact">\n      <div class="details">\n        <div><label>First</label>   <input type="text" ng-model="$ctrl.contact.name.first"></div>\n        <div><label>Last</label>    <input type="text" ng-model="$ctrl.contact.name.last"></div>\n        <div><label>Company</label> <input type="text" ng-model="$ctrl.contact.company"></div>\n        <div><label>Age</label>     <input type="text" ng-model="$ctrl.contact.age"></div>\n        <div><label>Phone</label>   <input type="text" ng-model="$ctrl.contact.phone"></div>\n        <div><label>Email</label>   <input type="text" ng-model="$ctrl.contact.email"></div>\n        <div><label>Street</label>  <input type="text" ng-model="$ctrl.contact.address.street"></div>\n        <div><label>City</label>    <input type="text" ng-model="$ctrl.contact.address.city"> </div>\n        <div><label>State</label>   <input type="text" ng-model="$ctrl.contact.address.state"></div>\n        <div><label>Zip</label>     <input type="text" ng-model="$ctrl.contact.address.zip"></div>\n        <div><label>Image</label>   <input type="text" ng-model="$ctrl.contact.picture"></div>\n      </div>\n    \n      <hr>\n    \n      <div>\n        \x3c!-- This button\'s ui-sref relatively targets the parent state, i.e., contacts.contact --\x3e\n        <button class="btn btn-primary" ui-sref="^"><i class="fa fa-close"></i><span>Cancel</span></button>\n        <button class="btn btn-primary" ng-click="$ctrl.save($ctrl.contact)"><i class="fa fa-save"></i><span>Save</span></button>\n        <button class="btn btn-primary" ng-click="$ctrl.remove($ctrl.contact)"><i class="fa fa-close"></i><span>Delete</span></button>\n      </div>\n    </div>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newContactState=t.editContactState=t.viewContactState=t.contactsState=void 0,n(8);t.contactsState={parent:"app",name:"contacts",url:"/contacts",resolve:{contacts:["Contacts",function(e){return e.all()}]},data:{requiresAuth:!0},deepStateRedirect:!0,sticky:!0,views:{contacts:"contacts"}},t.viewContactState={name:"contacts.contact",url:"/:contactId",resolve:{contact:["Contacts","$transition$",function(e,t){return e.get(t.params().contactId)}]},component:"contactView"},t.editContactState={name:"contacts.contact.edit",url:"/edit",views:{"^.^.$default":{bindings:{pristineContact:"contact"},component:"editContact"}}},t.newContactState={name:"contacts.new",url:"/new",component:"editContact"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t,n,s,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$state=t,this.DialogService=n,this.AppConfig=s,this.Messages=i}return e.prototype.$onInit=function(){this.pristineMessage=angular.extend({from:this.AppConfig.emailAddress},this.$stateParams.message),this.message=angular.copy(this.pristineMessage)},e.prototype.uiCanExit=function(){if(this.canExit||angular.equals(this.pristineMessage,this.message))return!0;return this.DialogService.confirm("You have not saved this message.","Navigate away and lose changes?","Yes","No")},e.prototype.gotoPreviousState=function(){var e=this.$transition$,t=!!e.from().name,n=t?e.from():"mymessages.messagelist",s=t?e.params("from"):{};this.$state.go(n,s)},e.prototype.send=function(e){var t=this;this.Messages.save(angular.extend(e,{date:new Date,read:!0,folder:"sent"})).then(function(){return t.canExit=!0}).then(function(){return t.gotoPreviousState()})},e.prototype.save=function(e){var t=this;this.Messages.save(angular.extend(e,{date:new Date,read:!0,folder:"drafts"})).then(function(){return t.canExit=!0}).then(function(){return t.gotoPreviousState()})},e}();s.$inject=["$state","DialogService","AppConfig","Messages"];t.compose={bindings:{$stateParams:"<",$transition$:"<"},controller:s,template:'\n    <div class="compose">\n      <div class="header">\n        <div class="flex-h"> <label>Recipient</label> <input type="text" id="to" name="to" ng-model="$ctrl.message.to"> </div>\n        <div class="flex-h"> <label>Subject</label> <input type="text" id="subject" name="subject" ng-model="$ctrl.message.subject"> </div>\n      </div>\n    \n      <div class="body">\n        <textarea name="body" id="body" ng-model="$ctrl.message.body" cols="30" rows="20"></textarea>\n        \n        <div class="buttons">\n          \x3c!-- Clicking this button brings the user back to the state they came from (previous state) --\x3e\n          <button class="btn btn-primary" ng-click="$ctrl.gotoPreviousState()"><i class="fa fa-times-circle-o"></i><span>Cancel</span></button>\n          <button class="btn btn-primary" ng-click="$ctrl.save($ctrl.message)"><i class="fa fa-save"></i><span>Save as Draft</span></button>\n          <button class="btn btn-primary" ng-click="$ctrl.send($ctrl.message)"><i class="fa fa-paper-plane-o"></i><span>Send</span></button>\n        </div>\n      </div>\n    </div>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.folderList={bindings:{folders:"<"},template:'\n    \x3c!-- Renders a list of folders --\x3e\n    <div class="folderlist">\n      <ul class="selectlist list-unstyled">\n  \n        \x3c!-- Highlight the selected folder:\n            When the current state matches the ui-sref\'s state (and its parameters)\n            ui-sref-active applies the \'selected\' class to the li element --\x3e\n        <li class="folder" ui-sref-active="selected" ng-repeat="folder in $ctrl.folders" >\n          \x3c!-- This ui-sref is a relative link to the \'mymessages.messagelist\' substate. It provides the\n              \'folderId\' parameter value from the current folder\'s .id property --\x3e\n          <a ui-sref=".messagelist({folderId: folder._id})"><i class="fa"></i>{{folder._id}}</a>\n        </li>\n      </ul>\n    </div>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.message=void 0;var s=n(7);var i=function(e,t){return e+t.subject},a=function(e){return"\n\n\n\n---------------------------------------\nOriginal message:\nFrom: "+e.from+"\nDate: "+e.date+"\nSubject: "+e.subject+"\n\n"+e.body},o=function(e,t){return{from:t.to,to:t.from,subject:i(e,t),body:a(t)}},r=function(){function e(t,n,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$state=t,this.DialogService=n,this.Messages=s}return e.prototype.$onInit=function(){this.message.read=!0,this.Messages.put(this.message),this.actions=this.folder.actions.reduce(function(e,t){return(0,s.setProp)(e,t,!0)},{})},e.prototype.reply=function(e){var t=o("Re: ",e);this.$state.go("mymessages.compose",{message:t})},e.prototype.forward=function(e){var t=o("Fwd: ",e);delete t.to,this.$state.go("mymessages.compose",{message:t})},e.prototype.editDraft=function(e){this.$state.go("mymessages.compose",{message:e})},e.prototype.remove=function(e){var t=this,n=this.nextMessageGetter(e._id),s=n?"mymessages.messagelist.message":"mymessages.messagelist",i={messageId:n};this.DialogService.confirm("Delete?",void 0).then(function(){return t.Messages.remove(e)}).then(function(){return t.$state.go(s,i,{reload:"mymessages.messagelist"})})},e}();r.$inject=["$state","DialogService","Messages"];t.message={bindings:{folder:"<",message:"<",nextMessageGetter:"<"},controller:r,template:'\n    <div class="message">\n    \n      <div class="header">\n        <div>\n          <h4>{{$ctrl.message.subject}}</h4>\n          <h5>{{$ctrl.message.from}} <i class="fa fa-long-arrow-right"></i> {{$ctrl.message.to}}</h5>\n        </div>\n    \n        <div class="line2">\n          <div>{{$ctrl.message.date | date: \'longDate\'}} {{$ctrl.message.date | date: \'mediumTime\'}}</div>\n          <div>\n            <button class="btn btn-primary" ng-show="$ctrl.actions.edit" ng-click="$ctrl.editDraft($ctrl.message)"><i class="fa fa-pencil"></i> <span>Edit Draft</span></button>\n            <button class="btn btn-primary" ng-show="$ctrl.actions.reply" ng-click="$ctrl.reply($ctrl.message)"><i class="fa fa-reply"></i> <span>Reply</span></button>\n            <button class="btn btn-primary" ng-show="$ctrl.actions.forward" ng-click="$ctrl.forward($ctrl.message)"><i class="fa fa-forward" ></i> <span>Forward</span></button>\n            <button class="btn btn-primary" ng-show="$ctrl.actions.delete" ng-click="$ctrl.remove($ctrl.message)"><i class="fa fa-close"></i> <span>Delete</span></button>\n          </div>\n        </div>\n      </div>\n    \n      \x3c!-- Pass the raw (plain text) message body through the messageBody filter to format slightly nicer. --\x3e\n      <div class="body" ng-bind-html="::$ctrl.message.body | messageBody"></div>\n    </div>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.messageList={bindings:{folder:"<",messages:"<"},template:'\n    <div class="messages">\n      <message-table columns="$ctrl.folder.columns" messages="$ctrl.messages"></message-table>\n    </div>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.mymessages={bindings:{folders:"<"},template:'\n    <div class="my-messages">\n    \n      \x3c!-- Show message folders --\x3e\n      <folder-list folders="$ctrl.folders"></folder-list>\n    \n      \x3c!-- A named view for the list of messages in this folder.  This will be  filled in by the \'mymessages.messagelist\' child state --\x3e\n      <div ui-view="messagelist" class="messagelist"> </div>\n    \n    </div>\n    \n    \x3c!-- A named ui-view for a message\'s contents.  The \'mymessages.messagelist.message\' grandchild state plugs into this ui-view --\x3e\n    <div ui-view="messagecontent"></div>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.messageTable={bindings:{columns:"<",messages:"<"},controller:s,template:'\n    <table>\n      <thead>\n        <tr>\n          <td ng-if="::$ctrl.colVisible(\'read\')"></td>\n          <td ng-if="::$ctrl.colVisible(\'from\')"     sort-messages="from">Sender</td>\n          <td ng-if="::$ctrl.colVisible(\'to\')"       sort-messages="to">Recipient</td>\n          <td ng-if="::$ctrl.colVisible(\'subject\')"  sort-messages="subject">Subject</td>\n          <td ng-if="::$ctrl.colVisible(\'date\')"     sort-messages="date">Date</td>\n        </tr>\n      </thead>\n  \n      <tbody>\n        <tr ng-repeat="message in $ctrl.messages | orderBy: $ctrl.AppConfig.sort track by message._id"\n            ui-sref=".message({messageId: message._id})" ui-sref-active="active">\n          <td ng-if="::$ctrl.colVisible(\'read\')"><i class="fa fa-circle" style="font-size: 50%" ng-show="!message.read"></td>\n          <td ng-if="::$ctrl.colVisible(\'from\')">{{ message.from }}</td>\n          <td ng-if="::$ctrl.colVisible(\'to\')">{{ message.to }}</td>\n          <td ng-if="::$ctrl.colVisible(\'subject\')">{{ message.subject }}</td>\n          <td ng-if="::$ctrl.colVisible(\'date\')">{{ message.date | date: "yyyy-MM-dd" }}</td>\n        </tr>\n      </tbody>\n  \n    </table>\n'};function s(e){var t=this;this.AppConfig=e,this.colVisible=function(e){return-1!==t.columns.indexOf(e)}}s.$inject=["AppConfig"]},function(e,t,n){"use strict";function s(e){return{restrict:"A",link:function(t,n,s){var i=s.sortMessages;if(i){var a=angular.element("<i style='padding-left: 0.25em' class='fa'></i>");n.append(a),n.on("click",function(t){return e.sort=e.sort==="+"+i?"-"+i:"+"+i}),t.$watch(function(){return e.sort},function(e){a.toggleClass("fa-sort-asc",e=="+"+i),a.toggleClass("fa-sort-desc",e=="-"+i)})}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.sortMessages=s,s.$inject=["AppConfig"]},function(e,t,n){"use strict";function s(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.trustAsHtml(t.split(/\n/).map(function(e){return"<p>"+e+"</p>"}).join("\n"))}}Object.defineProperty(t,"__esModule",{value:!0}),t.messageBody=s,s.$inject=["$sce"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t.MessageListUI=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$filter=t,this.AppConfig=n}return e.prototype.proximalMessageId=function(e,t){var n=this.$filter("orderBy")(e,this.AppConfig.sort),s=n.findIndex(function(e){return e._id===t}),i=n.length>s+1?s+1:s-1;return i>=0?n[i]._id:void 0},e}()).$inject=["$filter","AppConfig"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.mymessagesState={parent:"app",name:"mymessages",url:"/mymessages",resolve:{folders:["Folders",function(e){return e.all()}]},views:{mymessages:"mymessages"},data:{requiresAuth:!0},deepStateRedirect:{default:{state:"mymessages.messagelist"}},sticky:!0},t.messageListState={name:"mymessages.messagelist",url:"/:folderId",params:{folderId:"inbox"},resolve:{folder:["Folders","$stateParams",function(e,t){return e.get(t.folderId)}],messages:["Messages","folder",function(e,t){return e.byFolder(t)}]},views:{messagelist:"messageList"}},t.messageState={name:"mymessages.messagelist.message",url:"/:messageId",resolve:{message:["Messages","$stateParams",function(e,t){return e.get(t.messageId)}],nextMessageGetter:["MessageListUI","messages",function(e,t){return e.proximalMessageId.bind(e,t)}]},views:{"^.^.messagecontent":"message"}},t.composeState={name:"mymessages.compose",url:"/compose",params:{message:{}},views:{"!$default.mymessages":"compose"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.AppConfig=t}return e.prototype.$onInit=function(){this.prefs={restDelay:this.AppConfig.restDelay}},e.prototype.reset=function(){sessionStorage.clear(),document.location.reload(!0)},e.prototype.savePrefs=function(){angular.extend(this.AppConfig,{restDelay:this.prefs.restDelay}).save(),document.location.reload(!0)},e}();s.$inject=["AppConfig"];t.prefs={controller:s,template:'\n    <div>\n      <button class="btn btn-primary" ng-click="$ctrl.reset()"><i class="fa fa-recycle"></i> <span>Reset All Data</span></button>\n    </div>\n    \n    <div>\n      <label for="restDelay">Simulated REST API delay (ms)</label>\n      <input type="text" name="restDelay" ng-model="$ctrl.prefs.restDelay">\n      <button class="btn btn-primary" ng-click="$ctrl.savePrefs()">Save</button>\n    </div>\n'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.prefsState={parent:"app",name:"prefs",url:"/prefs",component:"prefs",data:{requiresAuth:!0}}},function(e,t,n){"use strict";var s,i,a,o,r,c,l=n(47);s=window,i=document,a="script",o="ga",s.GoogleAnalyticsObject=o,s.ga=s.ga||function(){(s.ga.q=s.ga.q||[]).push(arguments)},s.ga.l=1*new Date,r=i.createElement(a),c=i.getElementsByTagName(a)[0],r.async=1,r.src="//www.google-analytics.com/analytics.js",c.parentNode.insertBefore(r,c),ga("create","UA-73329341-1","auto"),ga("send","pageview"),l.ngmodule.config(["$transitionsProvider",function(e){var t=function(e){return window.ga("send","pageview",e)},n=function(e){var t=e.$to().url.format(e.params());return"/"+(location.pathname+t).split("/").filter(function(e){return e}).join("/")};e.onSuccess({},function(e){return t(n(e))},{priority:-1e4}),e.onError({},function(e){return function(e){var s=e.error(),i=s&&s.hasOwnProperty("type")?s.type:"_",a=s&&s.hasOwnProperty("message")?s.message:"_";t(n(e)+";errorType="+i+";errorMessage="+a)}(e)},{priority:-1e4})}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ngmodule=void 0;var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(5)),i=u(n(54)),a=n(55),o=n(50),r=u(n(53)),c=n(9),l=n(6);function u(e){return e&&e.__esModule?e:{default:e}}(t.ngmodule=s.module("demo",[i.default,r.default,c.MAIN_MODULE.name,l.GLOBAL_MODULE.name])).config(["$uiRouterProvider","$locationProvider",function(e,t){t.hashPrefix(""),e.plugin(a.StickyStatesPlugin),e.plugin(o.DSRPlugin),n.e(2).then(n.t.bind(null,56,7)).then(function(t){return e.plugin(t.Visualizer)})}])}]);
//# sourceMappingURL=sampleapp.js.map